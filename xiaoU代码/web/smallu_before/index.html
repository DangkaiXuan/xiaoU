<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小u课堂</title>
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_2384888_ojge9md3tr.css">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/index.css">

    <!-- 1. 引入vue依赖 -->
    <script src="./vue/vue-v2.6.10.js"></script>
    <script src="./vue/axios-0.18.0.js"></script>
</head>

<body>
    <div id="app">
        <!-- 导航菜单 -->
        <nav>
            <div class="main">
                <img src="./img/index/logo.png" alt="" class="logo">
                <ul class="">
                    <li class="check"><a href="./index.html">首页</a></li>
                    <li><a href="./pages/online.html">同步课程</a></li>
                    <li><a href="javascript:;">在线练习</a></li>
                    <li><a href="javascript:;">精品课程</a></li>
                </ul>
                <div class="search">
                    <div class="left">课程<i class="iconfont icon-down"></i>
                    </div>
                    <input type="text" placeholder="搜索感兴趣的内容">
                    <img src="./img/index/search.png" alt="">
                </div>

                <!-- 如果用户没有登录 显示此内容 -->
                <div class="login" v-show="flag1">
                    <a href="./pages/loginAndRegister/login.html">登陆</a>
                    /
                    <a href="./pages/loginAndRegister/register.html">注册</a>
                </div>

                <!-- 如果用户登录 显示此内容 -->
                <div class="user" v-show="flag2">
                    <img src="./img/login/user.png" alt="">
                    <div class="userlist">
                        <ul>
                            <li><a href="javascript:;" v-text="user.username">我是用户名</a></li>
                            <li><a href="./pages/course.html">课程中心</a></li>
                            <li><a href="./pages/product.html">订单中心</a></li>
                            <li><a href="javascript:;">资金管理</a></li>
                            <li><a href="./pages/userSeting.html">个人中心</a></li>
                            <li class="out"><a href="javascript:;" @click="loginOut">退出登陆</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 主体内容 -->
        <main>
            <!-- banner -->
            <div class="banner">
                <ul class="img">

                </ul>
                <ul class="list">

                </ul>
            </div>

            <!-- Java课程 -->
            <div class="online">
                <div class="title">
                    <span class="line"></span>
                    <span class="cont">Java课程</span>
                    <span class="more">更多课程<i class="iconfont icon-right1"></i>
                    </span>
                </div>
                <div class="onlineCont">
                    <div class="content">
                        <ul>
                            <li v-for="course in javaList">
                                <div class="top">
                                    <span class="rj" v-text="course.courseName">人教版</span>
                                    <a :href="'./pages/videoDetail.html?cid='+course.cid"><img :src="'http://localhost:8080/javawebDemo/'+course.courseImage" alt="" class="m"></a>                                    <p>1100人在学习</p>
                                </div>
                                <div class="bottom">
                                    <div class="left">
                                        <span v-text="course.descs">行政管理专业班</span>
                                        <span class="time">23课时</span>
                                    </div>
                                    <div class="right" v-text="course.coursePrice+'元'">免费学习</div>
                                </div>
                            </li>
                          
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 页面广告 -->
            <div class="contBanner">
                <img src="./img/index/WechatIMG20.png" alt="">
            </div>

            <!-- 数据库课程 -->
            <div class="testClass">
                <div class="title">
                    <span class="line"></span>
                    <span class="cont">数据课程</span>
                    <span class="more">更多课程<i class="iconfont icon-right1"></i>
                    </span>
                </div>
                <div class="onlineCont">
                    <div class="content">
                        <ul>
                            <li v-for="course in sqlList">
                                <div class="top">
                                    <span class="rj" v-text="course.courseName">北京</span>
                                    <a :href="'./pages/videoDetail.html?cid='+course.cid"><img :src="'http://localhost:8080/javawebDemo/'+course.courseImage" alt="" class="m"></a>
                                    <p>
                                        <span>1100人已考试</span>
                                        <span>初二</span>
                                    </p>
                                </div>
                                <div class="bottom">
                                    <div class="left">
                                        <span v-text="course.descs">2020年6月北京中考试题</span>
                                    </div>
                                    <div class="right" v-text="course.coursePrice+'元'">去考试</div>
                                </div>
                            </li>
                          
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 前端课程 -->
            <div class="goodClass">
                <div class="title">
                    <span class="line"></span>
                    <span class="cont">前端课程</span>
                    <span class="more">更多课程<i class="iconfont icon-right1"></i>
                    </span>
                </div>
                <div class="onlineCont">
                    <div class="content">
                        <ul>
                            <li v-for="course in webList">
                                <div class="top">
                                    <span class="rj" v-text="course.courseName">天津</span>
                                    <a :href="'./pages/videoDetail.html?cid='+course.cid"><img :src="'http://localhost:8080/javawebDemo/'+course.courseImage" alt="" class="m"></a>
                                    <p>1100人在学习</p>
                                </div>
                                <div class="bottom">
                                    <div class="left">
                                        <span v-text="course.descs">行政管理专业班</span>
                                        <span class="time">23课时</span>
                                    </div>
                                    <div class="right" v-text="course.coursePrice+'元'">免费学习</div>
                                </div>
                            </li> 
                        </ul>
                    </div>
                    <div class="rightCont">
                        <img src="./img/index/good_banner7.png" alt="">
                    </div>
                </div>
            </div>

            <div class="footB">
                <div><img src="./img/index/foot1.png" alt=""></div>
                <div><img src="./img/index/foot2.png" alt=""></div>
                <div><img src="./img/index/foot3.png" alt=""></div>
            </div>

            <div class="fix">
                <div class="lesson">
                    <img src="./img/index/mylesson.png" alt="">
                </div>
                <div class="test">
                    <img src="./img/index/mytest.png" alt="">
                </div>
                <div class="top">
                    <img src="./img/index/gotop.png" alt="">
                </div>
            </div>
        </main>

        <footer>
            <div class="cont">
                <div class="main">
                    <p>
                        首页 | 关于我们 | 加入我们 | 合作专区 | 联系我们 | AI开放平台 | 意见反馈 | 漏洞提交 | 隐私政策 | 版权声明 | 反盗链声明 | 网上有害信息举报 | 备案公示 |
                        营业执照
                        | 教师资格证公示

                    </p>
                    <p>
                        京ICP备 13030888号 Copyright © 2014-2019 行者信息科技（北京）有限公司 | 地址：北京市新华区马当路388号C座 | 电话：010-66666666 |
                        京公网安备
                        01010102002533号
                    </p>
                    <p>
                        京网文〔2018〕4086-308号 | 网络文化经营许可证：沪网文[2018]4086-308号 | 增值电信业务经营许可证：京B2-20150021 |
                        食品经营许可证：JY13101140088888
                    </p>
                    <p>医疗器械经营许可证：京嘉食药监械经营许20188008号 | 互联网药品信息服务资格证书：(京)-经营性-2018-0011 |</p>
                </div>
            </div>
        </footer>
    </div>
    <script src="js/data.js"></script>
    <script src="js/ujiuye.js"></script>
    <script src="js/index.js"></script>
    <script src="./utils/utils.js"></script>
    <script src="./js/user.js"></script>
    <script>
        axios.defaults.withCredentials = true  // vue发送axios 允许携带cookie
        // 2. 实例化vue对象
        new Vue({
            el: '#app',
            data: {
                user: '',  // 接受用户信息
                flag1: false, // 登录注册标签显示
                flag2: true, // 用户信息标签隐藏
                javaList: '',  // Java相关的课程 1
                sqlList: '', // 数据库相关课程 2
                webList: '', // 前端相关课程 3
            },
            methods: {
                //获取登录人的信息
                getUserInfo(){  
                    // 获取session中 有没有user
                    axios.post('http://localhost:8080/beforeuser?method=getUserInfo').then(resp=>{
                    //   alert(resp.data.flag)
                    //flag登录注册标签,flag2用户隐藏标签
                        // console.log(resp.data.flag);
                    //    console.log(resp.data.data);
                        if(resp.data.flag){
                            this.user =  resp.data.data
                            this.flag1 = false;
                            this.flag2 = true;
                        }else{
                            this.flag1 = true;
                            this.flag2 = false;
                        }
                   });
                },
            
                loginOut(){  // 点击退出登录
                    axios.post('http://localhost:8080/beforeuser?method=logOut').then(resp=>{
                    //flag登录注册标签,flag2用户隐藏标签
                        if(resp.data.flag){
                            this.user = '';
                            this.flag1 = true;//登录注册隐藏
                            this.flag2 = false;//用户注册开启
                        }
                   });
                },
                initCourse(type){ // 根据类别获取 首页课程信息
                    var params = new URLSearchParams();
                    params.append("method","getCourseByType");
                    params.append("type",type);
                    axios.post('http://localhost:8080/beforecourse',params).then(resp=>{
                        if(type === 1 ){
                            this.javaList = resp.data.data;
                        }
                        if(type === 2 ){
                            this.sqlList = resp.data.data;
                        }
                        if(type === 3 ){
                            this.webList = resp.data.data;
                        }
                    })
                }
            },
            created(){ 
                this.getUserInfo()   // 判断用户是否登录
                this.initCourse(1)  // 获取相Java相关的课程信息
                this.initCourse(2)  // 获取相数据库相关的课程信息
                this.initCourse(3)  // 获取相前端相关的课程信息
            }
        })
    </script>
</body>

</html>